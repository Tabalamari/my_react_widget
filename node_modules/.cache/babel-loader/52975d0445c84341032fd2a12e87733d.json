{"ast":null,"code":"import _slicedToArray from\"/Users/tabalamari/Documents/Embedded widget/my-widget/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import moment from'moment';import axiosInstance from'./../index';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MARKET_STACK_QUOTE_URL=\"\".concat(process.env.REACT_APP_MARKETSTACK_BASE_URL,\"/intraday\");var MARKET_STACK_TICKER_URL=\"\".concat(process.env.REACT_APP_MARKETSTACK_BASE_URL,\"/tickers\");function StockQuote(props){var _useState=useState({price:'--',var:'--',time:'--'}),_useState2=_slicedToArray(_useState,2),quote=_useState2[0],setQuote=_useState2[1];var _useState3=useState({stockExchange:'N/A',name:'N/A'}),_useState4=_slicedToArray(_useState3,2),stock=_useState4[0],setStock=_useState4[1];useEffect(function(){axiosInstance.get(MARKET_STACK_QUOTE_URL,{params:{access_key:process.env.REACT_APP_MARKETSTACK_ACCESS_KEY,symbols:props.symbol,interval:'15min',date_from:moment().subtract(1,'day').format('YYYY-MM-DD'),date_to:moment().format('YYYY-MM-DD'),limit:'1'}}).then(function(result){if(!result.data.data||result.data.data.length<=0){return;}var lastQuote=result.data.data[0];setQuote({price:lastQuote.last,var:Math.trunc(-(1-lastQuote.last/lastQuote.open)*10000)/100,time:moment(lastQuote.date).format('YYYY-MM-DD HH:mm')});});});useEffect(function(){axiosInstance.get(\"\".concat(MARKET_STACK_TICKER_URL,\"/\").concat(props.symbol),{params:{access_key:process.env.REACT_APP_MARKETSTACK_ACCESS_KEY}}).then(function(result){if(!result.data){return;}setStock({stockExchange:result.data.stock_exchange.acronym,name:result.data.name});});});var varColor=quote.var<0?'text-red-500':'text-green-500';return/*#__PURE__*/_jsxs(\"div\",{className:'quote rounded-lg shadow-md p-4 bg-gray-800',children:[/*#__PURE__*/_jsx(\"span\",{className:'quoteSymbol text-sm text-white font-bold',children:props.symbol}),/*#__PURE__*/_jsx(\"span\",{className:'quoteSymbol text-2xs text-gray-400 ml-1',children:stock.name}),/*#__PURE__*/_jsxs(\"span\",{className:'quoteSymbol text-2xs text-gray-400 ml-1',children:[\"(\",stock.stockExchange,\")\"]}),/*#__PURE__*/_jsxs(\"div\",{className:'quote flex flex-row justify-between mt-1',children:[/*#__PURE__*/_jsxs(\"div\",{className:'quotePrice self-center text-2xl font-bold items-center text-white',children:[\"$\",quote.price]}),/*#__PURE__*/_jsxs(\"div\",{className:'flex flex-col text-right',children:[/*#__PURE__*/_jsxs(\"div\",{className:'quoteVar '+varColor,children:[quote.var,\"%\"]}),/*#__PURE__*/_jsx(\"div\",{className:'quoteTime text-right text-2xs text-gray-400',children:quote.time})]})]})]});}export default StockQuote;","map":{"version":3,"sources":["/Users/tabalamari/Documents/Embedded widget/my-widget/src/components/StockQuote.js"],"names":["React","useState","useEffect","moment","axiosInstance","MARKET_STACK_QUOTE_URL","process","env","REACT_APP_MARKETSTACK_BASE_URL","MARKET_STACK_TICKER_URL","StockQuote","props","price","var","time","quote","setQuote","stockExchange","name","stock","setStock","get","params","access_key","REACT_APP_MARKETSTACK_ACCESS_KEY","symbols","symbol","interval","date_from","subtract","format","date_to","limit","then","result","data","length","lastQuote","last","Math","trunc","open","date","stock_exchange","acronym","varColor"],"mappings":"2IAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,CAAyBC,SAAzB,KAAyC,OAAzC,CACA,MAAOC,CAAAA,MAAP,KAAmB,QAAnB,CACA,MAAOC,CAAAA,aAAP,KAA0B,YAA1B,C,wFAIA,GAAMC,CAAAA,sBAAsB,WAAMC,OAAO,CAACC,GAAR,CAAYC,8BAAlB,aAA5B,CACA,GAAMC,CAAAA,uBAAuB,WAAMH,OAAO,CAACC,GAAR,CAAYC,8BAAlB,YAA7B,CAEA,QAASE,CAAAA,UAAT,CAAoBC,KAApB,CAA2B,CACvB,cAA0BV,QAAQ,CAAC,CAC/BW,KAAK,CAAE,IADwB,CAE/BC,GAAG,CAAE,IAF0B,CAG/BC,IAAI,CAAE,IAHyB,CAAD,CAAlC,wCAAOC,KAAP,eAAcC,QAAd,eAKA,eAA0Bf,QAAQ,CAAC,CAC/BgB,aAAa,CAAE,KADgB,CAE/BC,IAAI,CAAE,KAFyB,CAAD,CAAlC,yCAAOC,KAAP,eAAcC,QAAd,eAKAlB,SAAS,CAAC,UAAM,CACZE,aAAa,CAACiB,GAAd,CAAkBhB,sBAAlB,CAA0C,CACtCiB,MAAM,CAAE,CACJC,UAAU,CAAEjB,OAAO,CAACC,GAAR,CAAYiB,gCADpB,CAEJC,OAAO,CAAEd,KAAK,CAACe,MAFX,CAGJC,QAAQ,CAAE,OAHN,CAIJC,SAAS,CAAEzB,MAAM,GAAG0B,QAAT,CAAkB,CAAlB,CAAqB,KAArB,EAA4BC,MAA5B,CAAmC,YAAnC,CAJP,CAKJC,OAAO,CAAE5B,MAAM,GAAG2B,MAAT,CAAgB,YAAhB,CALL,CAMJE,KAAK,CAAE,GANH,CAD8B,CAA1C,EASGC,IATH,CASQ,SAACC,MAAD,CAAY,CAChB,GAAI,CAACA,MAAM,CAACC,IAAP,CAAYA,IAAb,EAAqBD,MAAM,CAACC,IAAP,CAAYA,IAAZ,CAAiBC,MAAjB,EAA2B,CAApD,CAAuD,CACnD,OACH,CACD,GAAMC,CAAAA,SAAS,CAAGH,MAAM,CAACC,IAAP,CAAYA,IAAZ,CAAiB,CAAjB,CAAlB,CACAnB,QAAQ,CAAC,CACLJ,KAAK,CAAEyB,SAAS,CAACC,IADZ,CAELzB,GAAG,CAAE0B,IAAI,CAACC,KAAL,CAAW,EAAE,EAAKH,SAAS,CAACC,IAAV,CAAeD,SAAS,CAACI,IAAhC,EAAyC,KAApD,EAA6D,GAF7D,CAGL3B,IAAI,CAAEX,MAAM,CAACkC,SAAS,CAACK,IAAX,CAAN,CAAuBZ,MAAvB,CAA8B,kBAA9B,CAHD,CAAD,CAAR,CAKH,CAnBD,EAoBH,CArBQ,CAAT,CAuBA5B,SAAS,CAAC,UAAM,CACZE,aAAa,CAACiB,GAAd,WAAqBZ,uBAArB,aAAgDE,KAAK,CAACe,MAAtD,EAAgE,CAC5DJ,MAAM,CAAE,CACJC,UAAU,CAAEjB,OAAO,CAACC,GAAR,CAAYiB,gCADpB,CADoD,CAAhE,EAIGS,IAJH,CAIQ,SAACC,MAAD,CAAY,CAChB,GAAI,CAACA,MAAM,CAACC,IAAZ,CAAkB,CACd,OACH,CACDf,QAAQ,CAAC,CACLH,aAAa,CAAEiB,MAAM,CAACC,IAAP,CAAYQ,cAAZ,CAA2BC,OADrC,CAEL1B,IAAI,CAAEgB,MAAM,CAACC,IAAP,CAAYjB,IAFb,CAAD,CAAR,CAIH,CAZD,EAaH,CAdQ,CAAT,CAgBA,GAAM2B,CAAAA,QAAQ,CAAG9B,KAAK,CAACF,GAAN,CAAY,CAAZ,CAAgB,cAAhB,CAAiC,gBAAlD,CAEA,mBACI,aAAK,SAAS,CAAE,4CAAhB,wBACI,aAAM,SAAS,CAAE,0CAAjB,UAA8DF,KAAK,CAACe,MAApE,EADJ,cAEI,aAAM,SAAS,CAAE,yCAAjB,UAA6DP,KAAK,CAACD,IAAnE,EAFJ,cAGI,cAAM,SAAS,CAAE,yCAAjB,eAA8DC,KAAK,CAACF,aAApE,OAHJ,cAII,aAAK,SAAS,CAAE,0CAAhB,wBACI,aAAK,SAAS,CAAE,mEAAhB,eAAuFF,KAAK,CAACH,KAA7F,GADJ,cAEI,aAAK,SAAS,CAAE,0BAAhB,wBACI,aAAK,SAAS,CAAE,YAAciC,QAA9B,WAAyC9B,KAAK,CAACF,GAA/C,OADJ,cAEI,YAAK,SAAS,CAAE,6CAAhB,UAAgEE,KAAK,CAACD,IAAtE,EAFJ,GAFJ,GAJJ,GADJ,CAcH,CAED,cAAeJ,CAAAA,UAAf","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport moment from 'moment';\nimport axiosInstance from './../index';\n\n\n\nconst MARKET_STACK_QUOTE_URL = `${process.env.REACT_APP_MARKETSTACK_BASE_URL}/intraday`;\nconst MARKET_STACK_TICKER_URL = `${process.env.REACT_APP_MARKETSTACK_BASE_URL}/tickers`;\n\nfunction StockQuote(props) {\n    const [quote, setQuote] = useState({\n        price: '--',\n        var: '--',\n        time: '--'\n    });\n    const [stock, setStock] = useState({\n        stockExchange: 'N/A',\n        name: 'N/A',\n    });\n\n    useEffect(() => {\n        axiosInstance.get(MARKET_STACK_QUOTE_URL, {\n            params: {\n                access_key: process.env.REACT_APP_MARKETSTACK_ACCESS_KEY,\n                symbols: props.symbol,\n                interval: '15min',\n                date_from: moment().subtract(1, 'day').format('YYYY-MM-DD'),\n                date_to: moment().format('YYYY-MM-DD'),\n                limit: '1',\n            }\n        }).then((result) => {\n            if (!result.data.data || result.data.data.length <= 0) {\n                return;\n            }\n            const lastQuote = result.data.data[0];\n            setQuote({\n                price: lastQuote.last,\n                var: Math.trunc(-(1 - (lastQuote.last/lastQuote.open)) * 10000) / 100,\n                time: moment(lastQuote.date).format('YYYY-MM-DD HH:mm'),\n            })\n        });\n    });\n\n    useEffect(() => {\n        axiosInstance.get(`${MARKET_STACK_TICKER_URL}/${props.symbol}`, {\n            params: {\n                access_key: process.env.REACT_APP_MARKETSTACK_ACCESS_KEY,\n            }\n        }).then((result) => {\n            if (!result.data) {\n                return;\n            }\n            setStock({\n                stockExchange: result.data.stock_exchange.acronym,\n                name: result.data.name,\n            })\n        });\n    });\n\n    const varColor = quote.var < 0 ? 'text-red-500' : 'text-green-500';\n\n    return (\n        <div className={'quote rounded-lg shadow-md p-4 bg-gray-800'}>\n            <span className={'quoteSymbol text-sm text-white font-bold'}>{props.symbol}</span>\n            <span className={'quoteSymbol text-2xs text-gray-400 ml-1'}>{stock.name}</span>\n            <span className={'quoteSymbol text-2xs text-gray-400 ml-1'}>({stock.stockExchange})</span>\n            <div className={'quote flex flex-row justify-between mt-1'}>\n                <div className={'quotePrice self-center text-2xl font-bold items-center text-white'}>${quote.price}</div>\n                <div className={'flex flex-col text-right'}>\n                    <div className={'quoteVar ' + varColor}>{quote.var}%</div>\n                    <div className={'quoteTime text-right text-2xs text-gray-400'}>{quote.time}</div>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default StockQuote;"]},"metadata":{},"sourceType":"module"}